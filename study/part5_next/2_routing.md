# Project Structure

## layout

- 가장 가까운 layout부터 찾아서 -> 루트 layout
- 다 다른 루트 레이아웃을 루트레이아웃에 {children}만 넘겨주면 해결 가능

# Router

## pages Router

## app Router - Next.js 13

- 라우트가 되는 폴더 - 케밥케이스
- pages 및 기타 컴포넌트 - 대문자 카멜케이스?

### app Routing Convention

- 같은 중첩레벨 다이나믹 경로에서 다이나믹 경로 이름은 고유해야함

#### slug

- 쓰임 예
  - not-found는 중첩 불가하며 루트에 만들어야
  - 만약 하위 경로에서 다른 not-found 페이지를 보여주고싶다면
  - 해당 경로에 [...slug] 폴더 > page.tsx 파일에 not-found에 넣고 싶은 내용 넣어서 우회 가능
- 같은 레벨의 폴더가 있을 경우 slug 폴더는 우선순위에서 밀림

#### Route Groups & Private Folders

`(folder)`

- Group routes without affecting routing

`_folder`

- Opt folder and all child segments out of routing
- child도 라우팅에서 벗어난다는 점에서 소괄호와 다름. 유지 보수용으로 사용 용이. 유지 보수할 때 잠시 프라이빗 설정해놨다가 끝나면 푸는 식으로.

# 폴더(라우트) 트리 구조 시각화 사이트

https://tree.nathanfriend.io/

# Routing - 라우팅하는 방법

## 방법 1 - Link 컴포넌트

- a태그 사용하여 페이지 이동할 경우 넥스트의 장점을 활용하지 못하는 것
- 실제로 a태그 만들어서 클릭해보면 페이지 전체가 새로고침 되는 것을 볼 수 있다.
- 대신 넥스트에선 Link 컴포넌트를 사용하여 라우팅

layout.tsx

```tsx
import Link from "next/link";

export const metadata = {
  title: "Next.js",
  description: "Generated by Next.js",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body>
        <div>{children}</div>
        <a href="/login">로그인</a>
        <Link href={/login}>로그인</Link>
      </body>
    </html>
  );
}

```

## 방법 2 - useRouter

page.tsx

```tsx
"use client";

import { useRouter } from "next/navigation";

export default function page() {
  const router = useRouter();
  const onClickHandler = () => {
    router.push("/login"); // 브라우저에 현재 히스토리를 남기고 login 페이지로 이동. 뒤로가기 하면 이전 페이지로 이동.
    router.replace("/login");
    // 브라우저에 현재 히스토리가 남지 않음. 뒤로가기 하면 마지막 기록으로 이동
    // 기록이 남으면 안되는 경우 사용
    // 예를 들어, 쇼핑몰에서 결제화면에 진입하면서부터는 replace 사용
    // push()는 지정한 페이지로 이동
  };
  return (
    <>
      <h1>page component</h1>
      <button onClick="{onClickHandler}">클릭</button>
    </>
  );
}
```

- 이런 방식을 프로그래밍 라우팅 방식이라고 함.

## 리다이렉트

- 가장 안전하게 서버에서 튕기게 하는 방법
- 뒤 두 방법은 클라이언트에서 튕기기 때문에 일단 정보는 가게됨

```tsx
import { redirect } from "next/navigation";

export default function Product() {
  redirect("/");
  return (
    <>
      <h1>Product Component</h1>
    </>
  );
}
```
